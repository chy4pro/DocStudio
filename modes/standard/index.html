<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>DocStudio - 标准模式</title>
    <!-- 引入共享基础样式 -->
    <link rel="stylesheet" href="../../shared/base.css">
    <!-- 引入模式特定样式 -->
    <link rel="stylesheet" href="styles.css">
    <!-- 添加Markdown库 -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>DocStudio - 标准模式</h1>
            <a href="../../shared/about.html" class="about-btn">📖 使用帮助</a>
        </div>
        <button class="settings-btn">⚙️ 设置</button>
    </div>
    <div class="desktop-container">
        <div class="editor-container" id="draft-container">
            <div class="editor-header">
                <button id="workspace-btn" class="editor-btn">整理</button>
                <span class="spacer"></span>
                <div class="toggle-container">
                    <span class="toggle-label">AI建议</span>
                    <label class="toggle-switch" title="开启/关闭AI自动建议功能">
                        <input type="checkbox" id="workspace-toggle">
                        <span class="toggle-slider" title="开启/关闭AI自动建议功能"></span>
                    </label>
                </div>
            </div>
            <div data-role="textarea-container-draft"></div>
        </div>
        <button id="markdown-button" class="markdown-btn">generate</button>
        <div class="editor-container" id="preview-container">
            <div class="editor-header">
                <div class="toggle-container">
                    <label class="toggle-switch" title="开启/关闭自动渲染功能">
                        <input type="checkbox" id="displayspace-toggle">
                        <span class="toggle-slider" title="开启/关闭自动渲染功能"></span>
                    </label>
                    <span class="toggle-label">自动渲染</span>
                </div>
                <span class="spacer"></span>
                <button id="displayspace-btn" class="editor-btn">render</button>
            </div>
            <div data-role="textarea-container-preview"></div>
            <div id="markdown-preview" class="markdown-preview" contenteditable="true"></div>
        </div>
    </div>
    <!-- 全屏iframe显示 -->
    <div id="fullscreenContainer" class="fullscreen-container">
        <div class="iframe-toolbar">
            <button id="openNewTabBtn" class="iframe-btn">在新标签页打开</button>
            <button id="closeIframeBtn" class="iframe-btn">关闭</button>
        </div>
        <div class="iframe-container">
            <iframe id="renderFrame"></iframe>
        </div>
    </div>
    
    <!-- 设置弹窗 -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>设置</h3>
                <button class="close-btn" id="closeModal">×</button>
            </div>
            <div class="setting-item">
                <label for="apiEndpoint">API接口地址</label>
                <input type="text" id="apiEndpoint" placeholder="例如: https://api.example.com/v1">
            </div>
            <div class="setting-item">
                <label for="apiKey">API Key</label>
                <input type="password" id="apiKey" placeholder="输入您的API密钥">
            </div>
            <div class="setting-item">
                <label for="model">模型名称</label>
                <input type="text" id="model" placeholder="例如: gpt-3.5-turbo">
            </div>
            <div class="setting-item">
                <label for="temperature">温度 (0-2)</label>
                <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
                <span id="tempValue">0.7</span>
            </div>
            <div class="setting-item">
                <label for="maxTokens">最大令牌数</label>
                <input type="number" id="maxTokens" min="1" max="4096" value="2048">
            </div>
            <div class="setting-item" style="display: flex; gap: 10px;">
                <button id="testAPI" style="flex: 1; padding: 8px; background-color: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">测试连接</button>
                <button id="saveSettings" style="flex: 1; padding: 8px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">保存设置</button>
            </div>
            <div id="testResult" style="margin-top: 10px; padding: 8px; display: none; border-radius: 4px; text-align: center;"></div>
        </div>
    </div>
    
    <!-- 右键菜单 -->
    <div id="rightClickMenu" class="context-menu">
        <div class="menu-content">
            <input type="text" id="rightClickInput" placeholder="在这里输入...">
        </div>
    </div>
    
    <!-- 核心模块 -->
    <script src="../../js/events.js"></script>
    <script src="../../js/modeManager.js"></script>
    <script src="../../js/services/Settings.js"></script>
    <script src="../../js/services/RightClickMenu.js"></script>
    <script src="../../js/components/Draft.js"></script>
    <script src="../../js/components/Preview.js"></script>
    <script src="../../js/components/Publish.js"></script>
    <script src="../../js/main.js"></script>
    <!-- 模式特定脚本 -->
    <script src="script.js"></script>
</body>
</html>
